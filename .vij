#! /bin/zsh

__dafiles ()
{
    cmd=$1
    dafiles=$(find . -type f -name "$2" -printf '%p ')
    matches=$(echo $dafiles | gawk '{print NF}')
    echo $matches
    case "$matches" in
        0)
           echo "No matches found"
           show=""
           ;;
        1)
           show=$(echo $dafiles | sed -e 's/[[:space:]]*$//')
           ;;
        *)
           echo
           echo "Multiple matches found..."
           i=1
           for option in ${=dafiles}
           do
              echo "$i: $option"
              i=$(($i + 1))
           done
           echo "q: Quit"
           echo
           read ans
           if [[ "q" == "$ans" ]]; then
              show=""
           else
              show=$(echo $dafiles | gawk '{print $'$ans'}')
           fi
           ;;
    esac

    if [[ "" != "$show" ]]; then
       $cmd $show
    fi
}

vij ()
{
    # If a .java is given, remove it.  Otherwise, leave $1 unchanged.
    __dafiles "vim" ${1/%\.java/}.java
}
